{% extends "base.html" %}
{% block title %}Trade Stocks{% endblock %}
{% block content %}
<div class="row mb-4">
  <div class="col-lg-8">
    <h1 class="fw-bold">Trade Stocks</h1>
    <p class="lead text-muted">Buy or sell stocks from your portfolio.</p>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Buy Stocks</h5>
      </div>
      <div class="card-body">
        <form method="POST">
          <input type="hidden" name="action" value="buy">
          <div class="mb-3">
            <label for="stock_id_buy" class="form-label">Select Stock</label>
            <select name="stock_id" id="stock_id_buy" class="form-select" required>
              {% for stock in stocks %}
              <option value="{{ stock.id }}">{{ stock.company_name }} ({{ stock.ticker }}) - ${{ stock.initial_price }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="mb-3">
            <label for="quantity_buy" class="form-label">Quantity</label>
            <input type="number" name="quantity" id="quantity_buy" class="form-control" min="1" required>
          </div>
          <button type="submit" class="btn btn-primary">Buy</button>
        </form>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Sell Stocks</h5>
      </div>
      <div class="card-body">
        <form method="POST">
          <input type="hidden" name="action" value="sell">
          <div class="mb-3">
            <label for="stock_id_sell" class="form-label">Select Stock</label>
            <select name="stock_id" id="stock_id_sell" class="form-select" required>
              {% for item in portfolio %}
              <option value="{{ item.stock.id }}">{{ item.stock.company_name }} ({{ item.stock.ticker }}) - {{ item.quantity }} shares</option>
              {% endfor %}
            </select>
          </div>
          <div class="mb-3">
            <label for="quantity_sell" class="form-label">Quantity</label>
            <input type="number" name="quantity" id="quantity_sell" class="form-control" min="1" required>
          </div>
          <button type="submit" class="btn btn-primary">Sell</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}